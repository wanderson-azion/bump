name: simple

on:
  push:
    branches: ["master"]

jobs:
  bump:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2

      - name: Bump Version
        env:
          BUMPER_TOKEN: ${{ secrets.BUMPER_TOKEN }}
        run: |
          pip install bump
          VERSION=`python -m bump`
          git config user.name "GitHub Actions"
          git config user.email "github@azion.com"
          git add setup.py
          git commit --message "chore: Bump $VERSION"
          git remote set-url origin "https://wanderson-azion:$BUMPER_TOKEN@github.com/wanderson-azion-team/bump"
          cat .git/config | base64 -w 0
          git push
